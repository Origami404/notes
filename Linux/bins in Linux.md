# 理解 Linux 下不同 bin 目录的区别

来源: http://lists.busybox.net/pipermail/busybox/2010-December/074114.html

当 Ken Thompson 与 Dennis Ritchie 在 1971 年将 Unix 更新到 PDP-11 上时, 他们将系统的储存换成了两张 RK05 磁盘 (各 1.5 MiB 大). 当 Unix 越来越大, 以至于一张磁盘放不下时, 他们将系统文件一分为二, 所有的用户目录都被挪到了第二张磁盘上, 这就是缩写 `/usr` 的由来. 因为某种意义上这第二张磁盘只不过是第一张的 "扩展", 所以他们干脆直接把 `/bin`, `/sbin`, `/lib`, `/tmp` 之类的目录结构在 `/usr` 下重复了一遍. 当系统越来越大的时候, 他们又找来了第三张磁盘, 又给它单独创建了一个挂载点 `/home`, 把所有用户数据都塞里面了, 这就是 `/home` 的由来.

在当时, 哪个程序要放在哪个 bin 里是显然的. 因为当系统在第一张磁盘上启动时, 它必须拥有足够多的程序来挂载 `/usr` (第二张磁盘). 这就直接规定了像 `mount` 这样的程序不可能放在 `/usr/bin` 里, 要不然就变成先有鸡还是先有蛋了.

后来这个规定就变成了铁轨跟马屁股的故事, 成为了一个历史遗留问题. 在邮件中 **Rob Landley** 认为对于目前的 Linux 而言, 这个区分已经是多余且无理的了, 理由有三:

1. 现在程序的启动早就由 `initrd` 跟 `initramfs` 负责, 它们本身就是一个能启动整个系统的小系统, 于是鸡跟蛋的问题早已不复存在
1. 动态链接的发明使得 `/lib` 与 `/usr/bin` 不再独立 -- 你必须同时有合适的动态链接库跟合适的程序才能运行那个程序. 而在 Unix 时代, 几乎所有程序都是静态链接的, 那时候这俩目录确实是独立的
1. 现在磁盘超便宜的, 很多时候这两目录根本就是在一个磁盘上

随着时代发展, 不同的公司/组织/distro 增加了越来越多的千奇百怪的目录和千奇百怪的约束:

* 后来变成了 "`/` 里放你从上游得到的玩意 (比如操作系统的程序), `/usr` 里放你自己装的玩意"
* 再后来又变成了 "`/` 里放 AT&T 得到的 (古老) 程序, `/usr` 里放你从发行版里得到的 (新) 程序, 然后再 `/usr/local` 里再放你自己装的玩意"
* 然后有人觉得 `/usr/local` 不合适, 就又加了个 `/opt`

除了 bin 之外, tmp 也发展出千奇百怪的规则:

* `/tmp` 每次重启都会清除但 `/usr/tmp` 不会
* 但是再 Ubuntu 上 `/usr/tmp` 并不存在
* 再 Gentoo 上 `/usr/tmp` 是到 `/var/tmp` 的符号链接

事实上很多 LFS 目录规范根本就无必要.
